# 🚀 ADE20K语义分割 - 快速开始指南

## 立即开始

```bash
# 1. 激活环境
source /home/yr/anaconda3/bin/activate pytorch21

# 2. 快速测试 (2分钟内完成)
python ade20k_train.py --epochs 1 --batch_size 2 --subset_size 5

# 3. 标准训练 (推荐)
python ade20k_train.py --epochs 10 --batch_size 4

# 4. 推理测试
python semantic_inference.py --model_dir ./ade20k_results --input /path/to/image.jpg --visualize
```

## ✅ 已验证功能

- ✅ 数据集加载: 20,210个训练样本自动发现
- ✅ ADE20K格式: RG通道编码正确解析
- ✅ 150个类别: 完整ADE20K类别支持
- ✅ 环境兼容: PyTorch 2.5.1 + CUDA
- ✅ 本地模型: 支持本地DINOv3模型加载

## 📝 当前状态

**工作正常**:
- `ade20k_train.py` - 主训练脚本 ✅
- `semantic_train.py` - 通用训练脚本 ✅  
- `semantic_inference.py` - 推理脚本 ✅
- 数据加载和预处理 ✅
- README文档 ✅

**已知问题**:
- 本地模型路径需要确认hubconf.py文件位置
- 无网络时会自动尝试在线下载

## 🔧 故障排除

**问题**: 模型加载失败
**解决**: 脚本会自动回退到在线下载模式

**问题**: 内存不足
**解决**: 使用 `--batch_size 2` 或 `--subset_size 100`

**问题**: CUDA错误
**解决**: 确认pytorch21环境正确激活

## 📊 期望结果

- **训练**: 每个epoch约10-30分钟（取决于batch_size和GPU）
- **验证**: mIoU指标自动计算和保存
- **输出**: 模型权重和训练历史保存到./ade20k_results/
- **推理**: 彩色分割图和统计信息生成

开始训练吧！🎯